# populate_site.py
import os
import django
from django.utils.text import slugify
from datetime import date, timedelta

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'urogineco.settings')  # –ó–∞–º–µ–Ω–∏ "urogineco" –Ω–∞ –∏–º—è —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
django.setup()

from core.models import (
    SEOAndContent, Hero, Procedure, Testimonial, BlogPost, Event,
    AboutDoctor, UsefulInfo, ContactInfo, ClinicLocation
)

def create_seo():
    obj, created = SEOAndContent.objects.get_or_create(pk=1)
    if created:
        obj.meta_title = "–î–æ–∫—Ç–æ—Ä –ì–≤–æ–∑–¥–µ–≤ –ú.–Æ. | –£—Ä–æ–≥–∏–Ω–µ–∫–æ–ª–æ–≥ –≤ –ú–æ—Å–∫–≤–µ"
        obj.meta_description = "–í—Ä–∞—á-—É—Ä–æ–≥–∏–Ω–µ–∫–æ–ª–æ–≥ –≤—ã—Å—à–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –û–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–¥–µ—Ä–∂–∞–Ω–∏–∏, –ø—Ä–æ–ª–∞–ø—Å–µ, —Å–≤–∏—â–∞—Ö. –ê–≤—Ç–æ—Ä –ø–∞—Ç–µ–Ω—Ç–æ–≤–∞–Ω–Ω–æ–π –º–µ—Ç–æ–¥–∏–∫–∏."
        obj.save()
        print("‚úÖ SEO —Å–æ–∑–¥–∞–Ω")

def create_hero():
    if not Hero.objects.exists():
        hero = Hero.objects.create(
            title="–î–æ–∫—Ç–æ—Ä –ì–≤–æ–∑–¥–µ–≤ –ú–∏—Ö–∞–∏–ª –Æ—Ä—å–µ–≤–∏—á",
            subtitle="–í—Ä–∞—á-—É—Ä–æ–≥–∏–Ω–µ–∫–æ–ª–æ–≥ ‚Ä¢ –•–∏—Ä—É—Ä–≥ –≤—ã—Å—à–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
            description="<p>–ë–æ–ª–µ–µ 200 —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ç–∞–∑–æ–≤–æ–≥–æ –¥–Ω–∞. –ê–≤—Ç–æ—Ä —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –º–µ—Ç–æ–¥–∏–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ–∑–∏—Ü–∏–∏ —É—Ä–µ—Ç—Ä—ã.</p>",
            cta_text="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏—ë–º"
        )
        print("‚úÖ Hero —Å–æ–∑–¥–∞–Ω")

def create_procedures():
    procedures_data = [
        ("–ù–µ–¥–µ—Ä–∂–∞–Ω–∏–µ –º–æ—á–∏", "<p>–õ–µ—á–µ–Ω–∏–µ —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–≥–æ, —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –∏ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –Ω–µ–¥–µ—Ä–∂–∞–Ω–∏—è —É –∂–µ–Ω—â–∏–Ω.</p>"),
        ("–ü—Ä–æ–ª–∞–ø—Å —Ç–∞–∑–æ–≤—ã—Ö –æ—Ä–≥–∞–Ω–æ–≤ (–†–û–†)", "<p>–•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –æ–ø—É—â–µ–Ω–∏—è –º–∞—Ç–∫–∏, —Å—Ç–µ–Ω–æ–∫ –≤–ª–∞–≥–∞–ª–∏—â–∞ –∏ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.</p>"),
        ("–£—Ä–æ–≥–µ–Ω–∏—Ç–∞–ª—å–Ω—ã–µ —Å–≤–∏—â–∏", "<p>–ü–ª–∞—Å—Ç–∏–∫–∞ –≤–µ–∑–∏–∫–æ-–≤–ª–∞–≥–∞–ª–∏—â–Ω—ã—Ö, —É—Ä–µ—Ç—Ä–æ-–≤–ª–∞–≥–∞–ª–∏—â–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏—Ö —Å–≤–∏—â–µ–π.</p>"),
        ("–ö–∏—Å—Ç–∞ –∏ –¥–∏–≤–µ—Ä—Ç–∏–∫—É–ª —É—Ä–µ—Ç—Ä—ã", "<p>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–±—Ä–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π —É—Ä–µ—Ç—Ä—ã.</p>"),
        ("–û—Å–ª–æ–∂–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π", "<p>–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤ –≤ –¥—Ä—É–≥–∏—Ö –∫–ª–∏–Ω–∏–∫–∞—Ö.</p>"),
        ("–í—Ç–æ—Ä–æ–µ –º–Ω–µ–Ω–∏–µ", "<p>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–∏–∞–≥–Ω–æ–∑–∞ –∏ –≤—ã–±–æ—Ä–∞ —Ç–∞–∫—Ç–∏–∫–∏ –ª–µ—á–µ–Ω–∏—è.</p>"),
    ]
    for i, (title, desc) in enumerate(procedures_data, 1):
        proc, created = Procedure.objects.get_or_create(
            title=title,
            defaults={'description': desc, 'order': i}
        )
        if created:
            print(f"‚úÖ –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ '{title}' —Å–æ–∑–¥–∞–Ω–∞")

def create_testimonials():
    testimonials_data = [
        ("–ê–Ω–Ω–∞", 34, "<p>–ü–æ—Å–ª–µ —Ä–æ–¥–æ–≤ –º—É—á–∞–ª–∞—Å—å –æ—Ç –Ω–µ–¥–µ—Ä–∂–∞–Ω–∏—è 5 –ª–µ—Ç. –ü–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —É –¥–æ–∫—Ç–æ—Ä–∞ –ì–≤–æ–∑–¥–µ–≤–∞ ‚Äî –∫–∞–∫ –Ω–æ–≤–∞—è!</p>"),
        ("–ï–ª–µ–Ω–∞", 48, "<p>–û–ø—É—â–µ–Ω–∏–µ –º–∞—Ç–∫–∏ –≤—Ç–æ—Ä–æ–π —Å—Ç–µ–ø–µ–Ω–∏. –ë–æ—è–ª–∞—Å—å –æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω–æ –≤—Å—ë –ø—Ä–æ—à–ª–æ –ª–µ–≥–∫–æ. –°–ø–∞—Å–∏–±–æ!</p>"),
        ("–ú–∞—Ä–∏–Ω–∞", 52, "<p>–õ–µ—á–∏–ª–∞ —Å–≤–∏—â 3 –≥–æ–¥–∞ –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –ó–¥–µ—Å—å –ø–æ–º–æ–≥–ª–∏ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞.</p>"),
    ]
    for i, (name, age, text) in enumerate(testimonials_data, 1):
        test, created = Testimonial.objects.get_or_create(
            name=name,
            defaults={'age': age, 'text': text, 'order': i}
        )
        if created:
            print(f"‚úÖ –û—Ç–∑—ã–≤ –æ—Ç {name} —Å–æ–∑–¥–∞–Ω")

def create_blog_posts():
    posts_data = [
        ("–û–ø—ã—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∏–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ–∑–∏—Ü–∏–∏ —É—Ä–µ—Ç—Ä—ã", "<p>–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –≥–æ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ 87 –æ–ø–µ—Ä–∞—Ü–∏–π —Å –æ—Ç–ª–∏—á–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏...</p>"),
        ("–ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ–ª–∞–ø—Å–µ?", "<p>–ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫: –∞–Ω–∞–ª–∏–∑—ã, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å...</p>"),
        ("–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –ª–µ—á–∏—Ç—å –Ω–µ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–æ–≤—Ä–µ–º—è", "<p>–ó–∞–ø—É—â–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã —Ç—Ä–µ–±—É—é—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞. –ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –≤–∏–∑–∏—Ç –∫ –≤—Ä–∞—á—É!</p>"),
    ]
    for title, content in posts_data:
        slug = slugify(title)
        post, created = BlogPost.objects.get_or_create(
            slug=slug,
            defaults={
                'title': title,
                'content': content,
                'is_published': True
            }
        )
        if created:
            print(f"‚úÖ –ü–æ—Å—Ç '{title}' —Å–æ–∑–¥–∞–Ω")

def create_events():
    today = date.today()
    events_data = [
        ("XVIII –í—Å–µ—Ä–æ—Å—Å–∏–π—Å–∫–∏–π –∫–æ–Ω–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–≥–∏–Ω–µ–∫–æ–ª–æ–≥–∏–∏", today + timedelta(days=60), "–ú–æ—Å–∫–≤–∞, –¶–í–ö ¬´–≠–∫—Å–ø–æ—Ü–µ–Ω—Ç—Ä¬ª"),
        ("–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å: –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ç–∞–∑–æ–≤–æ–≥–æ –¥–Ω–∞", today + timedelta(days=90), "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥"),
        ("–ù–∞—É—á–Ω—ã–π —Å–∏–º–ø–æ–∑–∏—É–º –ï–≤—Ä–æ–ø–µ–π—Å–∫–æ–≥–æ –æ–±—â–µ—Å—Ç–≤–∞ —É—Ä–æ–≥–∏–Ω–µ–∫–æ–ª–æ–≥–æ–≤", today - timedelta(days=30), "–ë–µ—Ä–ª–∏–Ω, –ì–µ—Ä–º–∞–Ω–∏—è"),
    ]
    for title, event_date, location in events_data:
        event, created = Event.objects.get_or_create(
            title=title,
            date=event_date,
            defaults={'location': location}
        )
        if created:
            print(f"‚úÖ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ '{title}' —Å–æ–∑–¥–∞–Ω–æ")

def create_about_doctor():
    obj, created = AboutDoctor.objects.get_or_create(pk=1)
    if created:
        obj.bio = "<p>–í—Ä–∞—á –≤—ã—Å—à–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫–∞–Ω–¥–∏–¥–∞—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –Ω–∞—É–∫. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞—è —Ö–∏—Ä—É—Ä–≥–∏—è —Ç–∞–∑–æ–≤–æ–≥–æ –¥–Ω–∞. –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã ‚Äî –±–æ–ª–µ–µ 18 –ª–µ—Ç.</p>"
        obj.patents = "<p>–ü–∞—Ç–µ–Ω—Ç ‚ÑñRU2789012: ¬´–°–ø–æ—Å–æ–± —Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–æ–≥–æ –ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–≥–æ –Ω–µ–¥–µ—Ä–∂–∞–Ω–∏—è –º–æ—á–∏ —É –∂–µ–Ω—â–∏–Ω¬ª</p>"
        obj.awards = "<p>–õ–∞—É—Ä–µ–∞—Ç –ø—Ä–µ–º–∏–∏ ¬´–õ—É—á—à–∏–π –≤—Ä–∞—á –†–æ—Å—Å–∏–∏¬ª (2023)</p>"
        obj.save()
        print("‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–∞—á–µ —Å–æ–∑–¥–∞–Ω–∞")

def create_useful_info():
    obj, created = UsefulInfo.objects.get_or_create(pk=1)
    if created:
        obj.prep_consultation = "<p>‚Ä¢ –ü–∞—Å–ø–æ—Ä—Ç<br>‚Ä¢ –í—ã–ø–∏—Å–∫–∏ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏<br>‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –£–ó–ò –∏ —Ü–∏—Å—Ç–æ—Å–∫–æ–ø–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)</p>"
        obj.prep_surgery = "<p>‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (–≠–ö–ì, –û–ê–ö, –±–∏–æ—Ö–∏–º–∏—è)<br>‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∞–Ω–µ—Å—Ç–µ–∑–∏–æ–ª–æ–≥–∞</p>"
        obj.anesthesia_info = "<p>–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –ø–æ–¥ —ç–Ω–¥–æ—Ç—Ä–∞—Ö–µ–∞–ª—å–Ω—ã–º –Ω–∞—Ä–∫–æ–∑–æ–º —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –Ω–µ–π—Ä–æ–º—ã—à–µ—á–Ω–æ–π –±–ª–æ–∫–∞–¥—ã.</p>"
        obj.postop_period = "<p>–í—ã–ø–∏—Å–∫–∞ –Ω–∞ 3‚Äì5 —Å—É—Ç–∫–∏. –®–≤—ã —Ä–∞—Å—Å–∞—Å—ã–≤–∞—é—â–∏–µ—Å—è. –ê–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ ‚Äî —á–µ—Ä–µ–∑ 4 –Ω–µ–¥–µ–ª–∏.</p>"
        obj.save()
        print("‚úÖ –ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞")

def create_contact_info():
    obj, created = ContactInfo.objects.get_or_create(pk=1)
    if created:
        obj.telegram_link = "https://t.me/gvozdev_md"
        obj.whatsapp_link = "https://wa.me/79991234567"
        obj.address = "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è, –¥. 35/1"
        obj.save()
        print("‚úÖ –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–æ–∑–¥–∞–Ω—ã")

def create_clinic_locations():
    clinics_data = [
        ("–ö–ª–∏–Ω–∏–∫–∞ ¬´–ï–≤—Ä–æMed¬ª", "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è, –¥. 35/1", "https://yandex.ru/maps/?ll=37.635,55.745&z=16"),
        ("–ú–¶ ¬´–°–∫–∞–Ω–¥–∏–Ω–∞–≤–∏—è¬ª", "–≥. –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10", "https://yandex.ru/maps/?ll=30.315,59.939&z=16"),
    ]
    for name, address, map_link in clinics_data:
        clinic, created = ClinicLocation.objects.get_or_create(
            name=name,
            defaults={'address': address, 'map_link': map_link}
        )
        if created:
            print(f"‚úÖ –ö–ª–∏–Ω–∏–∫–∞ '{name}' –¥–æ–±–∞–≤–ª–µ–Ω–∞")

if __name__ == '__main__':
    print("üöÄ –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–∞–π—Ç —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏...\n")
    create_seo()
    create_hero()
    create_about_doctor()
    create_useful_info()
    create_contact_info()
    create_procedures()
    create_testimonials()
    create_blog_posts()
    create_events()
    create_clinic_locations()
    print("\n‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")